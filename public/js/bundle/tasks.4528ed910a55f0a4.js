"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8919],{1291:(t,e,s)=>{s.r(e),s.d(e,{default:()=>n});var a=s(5947),i=s.n(a);const r={metaInfo:{title:"Task"},data:function(){return{isLoading:!0,SubmitProcessing:!1,serverParams:{columnFilters:{},sort:{field:"id",type:"desc"},page:1,perPage:10},totalRows:"",search:"",limit:"10",tasks:[],tasks_base:[],editmode:!1,show_status:!0,task:{id:"",title:"",description:"",expire_at:"",remind_at:"",status:"pending",priority:1}}},computed:{columns:function(){return[{label:this.$t("Title"),field:"title",tdClass:"text-left",thClass:"text-left"},{label:this.$t("RemindAt"),field:"remind_at",tdClass:"text-left",thClass:"text-left"},{label:this.$t("ExpireAt"),field:"expire_at",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Priority"),field:"priority",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Status"),field:"status",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Action"),field:"actions",html:!0,tdClass:"text-right",thClass:"text-right",sortable:!1}]}},methods:{updateParams:function(t){this.serverParams=Object.assign({},this.serverParams,t)},onPageChange:function(t){var e=t.currentPage;this.serverParams.page!==e&&(this.updateParams({page:e}),this.Get_Tasks(e))},onPerPageChange:function(t){var e=t.currentPerPage;this.limit!==e&&(this.limit=e,this.updateParams({page:1,perPage:e}),this.Get_Tasks(1))},onSortChange:function(t){this.updateParams({sort:{type:t[0].type,field:t[0].field}}),this.Get_Tasks(this.serverParams.page)},onSearch:function(t){this.search=t.searchTerm,this.Get_Tasks(this.serverParams.page)},getValidationState:function(t){var e=t.dirty,s=t.validated,a=t.valid;return e||s?void 0===a?null:a:null},Submit_Task:function(){var t=this;this.$refs.Create_Task.validate().then((function(e){e?t.editmode?t.Update_Task():t.Create_Task():t.makeToast("danger",t.$t("Please_fill_the_form_correctly"),t.$t("Failed"))}))},makeToast:function(t,e,s){this.$root.$bvToast.toast(e,{title:s,variant:t,solid:!0})},New_Task:function(){this.reset_Form(),this.$bvModal.show("New_Task")},Edit_Task:function(t){this.Get_Tasks(this.serverParams.page),this.reset_Form(),this.task=t,""==this.task.expire_at||(this.show_status=!0),this.editmode=!0,this.$bvModal.show("New_Task")},Selected_Base_Task:function(t){null==t||(this.show_status=!0)},Get_Tasks:function(t){var e=this;i().start(),i().set(.1),axios.get("tasks?page="+t+"&SortField="+this.serverParams.sort.field+"&SortType="+this.serverParams.sort.type+"&search="+this.search+"&limit="+this.limit).then((function(t){var s;e.tasks=null!==(s=t.data.Tasks)&&void 0!==s?s:t.data.Task,e.totalRows=t.data.totalRows,e.tasks_base=t.data.Tasks_base,i().done(),e.isLoading=!1})).catch((function(t){i().done(),setTimeout((function(){e.isLoading=!1}),500)}))},setToStrings:function(){null===this.task.expire_at&&(this.task.expire_at="")},Create_Task:function(){var t=this;this.SubmitProcessing=!0,this.setToStrings(),axios.post("tasks",{title:this.task.title,description:this.task.description,expire_at:this.task.expire_at,status:this.task.status,priority:this.task.priority}).then((function(e){t.SubmitProcessing=!1,Fire.$emit("Event_Task"),t.makeToast("success",t.$t("Create.TitleTask"),t.$t("Success"))})).catch((function(e){t.SubmitProcessing=!1,t.makeToast("danger",t.$t("InvalidData"),t.$t("Failed"))}))},Update_Task:function(){var t=this;this.SubmitProcessing=!0,this.setToStrings(),axios.put("tasks/"+this.task.id,{title:this.task.title,description:this.task.description,expire_at:this.task.expire_at,status:this.task.status,priority:this.task.priority}).then((function(e){t.SubmitProcessing=!1,Fire.$emit("Event_Task"),t.makeToast("success",t.$t("Update.TitleTask"),t.$t("Success"))})).catch((function(e){t.SubmitProcessing=!1,t.makeToast("danger",t.$t("InvalidData"),t.$t("Failed"))}))},reset_Form:function(){this.task={id:"",title:"",description:"",expire_at:"",remind_at:"",status:"pending",priority:1}},Remove_Task:function(t){var e=this;this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((function(s){s.value&&axios.delete("tasks/"+t).then((function(t){t.data.success?e.$swal(e.$t("Delete.Deleted"),e.$t("Delete.TaskDeleted"),"success"):e.$swal(e.$t("Delete.Failed"),e.$t("Task_already_linked_with_sub_task"),"warning"),Fire.$emit("Delete_Task")})).catch((function(){e.$swal(e.$t("Delete.Failed"),e.$t("Delete.Therewassomethingwronge"),"warning")}))}))}},created:function(){var t=this;this.Get_Tasks(1),Fire.$on("Event_Task",(function(){setTimeout((function(){t.Get_Tasks(t.serverParams.page),t.$bvModal.hide("New_Task")}),500)})),Fire.$on("Delete_Task",(function(){setTimeout((function(){t.Get_Tasks(t.serverParams.page)}),500)}))}};const n=(0,s(14486).A)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("breadcumb",{attrs:{page:t.$t("Tasks"),folder:t.$t("Todo")}}),t._v(" "),t.isLoading?e("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):t._e(),t._v(" "),t.isLoading?t._e():e("b-card",{staticClass:"wrapper"},[e("vue-good-table",{attrs:{mode:"remote",columns:t.columns,totalRows:t.totalRows,rows:t.tasks,"search-options":{enabled:!0,placeholder:t.$t("Search_this_table")},"select-options":{enabled:!0,clearSelectionText:""},"pagination-options":{enabled:!0,mode:"records",nextLabel:"next",prevLabel:"prev"},styleClass:"table-hover tableOne vgt-table"},on:{"on-page-change":t.onPageChange,"on-per-page-change":t.onPerPageChange,"on-sort-change":t.onSortChange,"on-search":t.onSearch},scopedSlots:t._u([{key:"table-row",fn:function(s){return["actions"==s.column.field?e("span",[e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Edit"},on:{click:function(e){return t.Edit_Task(s.row)}}},[e("i",{staticClass:"i-Edit text-25 text-success"})]),t._v(" "),e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Delete"},on:{click:function(e){return t.Remove_Task(s.row.id)}}},[e("i",{staticClass:"i-Close-Window text-25 text-danger"})])]):"BaseTask"==s.column.field?e("div",[""!=s.row.remind_at?e("span",[t._v(t._s(s.row.remind_at))]):e("span",[t._v("N/D")])]):t._e()]}}],null,!1,1672214816)},[e("div",{staticClass:"mt-2 mb-3",attrs:{slot:"table-actions"},slot:"table-actions"},[e("b-button",{staticClass:"btn-rounded",attrs:{variant:"btn btn-primary btn-icon m-1"},on:{click:function(e){return t.New_Task()}}},[e("i",{staticClass:"i-Add"}),t._v("\n          "+t._s(t.$t("Add"))+"\n        ")])],1)])],1),t._v(" "),e("validation-observer",{ref:"Create_Task"},[e("b-modal",{attrs:{"hide-footer":"",size:"lg",id:"New_Task",title:t.editmode?t.$t("Edit"):t.$t("Add")}},[e("b-form",{on:{submit:function(e){return e.preventDefault(),t.Submit_Task.apply(null,arguments)}}},[e("b-row",[e("b-col",{attrs:{md:"12"}},[e("validation-provider",{attrs:{name:"title",rules:{required:!0,max:68}},scopedSlots:t._u([{key:"default",fn:function(s){return[e("b-form-group",{attrs:{label:t.$t("Title")+" *"}},[e("b-form-input",{attrs:{placeholder:t.$t("Enter_Task_Title"),state:t.getValidationState(s),"aria-describedby":"title-feedback",label:t.$t("Title")},model:{value:t.task.title,callback:function(e){t.$set(t.task,"title",e)},expression:"task.title"}}),t._v(" "),e("b-form-invalid-feedback",{attrs:{id:"title-feedback"}},[t._v(t._s(s.errors[0]))])],1)]}}])})],1),t._v(" "),e("b-col",{attrs:{md:"6"}},[e("validation-provider",{attrs:{name:"expireAt",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(s){return[e("b-form-group",{attrs:{label:t.$t("ExpireAt")+" *"}},[e("b-form-datepicker",{attrs:{placeholder:t.$t("Enter_Task_Expiry_Date"),state:t.getValidationState(s),"aria-describedby":"expireAt-feedback",label:t.$t("ExpireAt"),type:"datetime"},model:{value:t.task.expire_at,callback:function(e){t.$set(t.task,"expire_at",e)},expression:"task.expire_at"}}),t._v(" "),e("b-form-invalid-feedback",{attrs:{id:"expireAt-feedback"}},[t._v(t._s(s.errors[0]))])],1)]}}])})],1),t._v(" "),e("b-col",{attrs:{md:"6"}},[e("validation-provider",{attrs:{name:"remindAt",rules:{required:!1}},scopedSlots:t._u([{key:"default",fn:function(s){return[e("b-form-group",{attrs:{label:t.$t("RemindAt")}},[e("b-form-datepicker",{attrs:{placeholder:t.$t("Enter_Task_Remind_Date"),state:t.getValidationState(s),"aria-describedby":"remindAt-feedback",label:t.$t("RemindAt"),type:"datetime"},model:{value:t.task.remind_at,callback:function(e){t.$set(t.task,"remind_at",e)},expression:"task.remind_at"}}),t._v(" "),e("b-form-invalid-feedback",{attrs:{id:"remindAt-feedback"}},[t._v(t._s(s.errors[0]))])],1)]}}])})],1),t._v(" "),e("b-col",{attrs:{md:"12"}},[e("validation-provider",{attrs:{name:"description",rules:{required:!1,max:1e3}},scopedSlots:t._u([{key:"default",fn:function(s){return[e("b-form-group",{attrs:{label:t.$t("Description")}},[e("b-form-textarea",{attrs:{placeholder:t.$t("Enter_Task_Description"),state:t.getValidationState(s),"aria-describedby":"Description-feedback",label:"Description",rows:8,clearable:""},model:{value:t.task.description,callback:function(e){t.$set(t.task,"description",e)},expression:"task.description"}}),t._v(" "),e("b-form-invalid-feedback",{attrs:{id:"description-feedback"}},[t._v(t._s(s.errors[0]))])],1)]}}])})],1),t._v(" "),e("b-col",{directives:[{name:"show",rawName:"v-show",value:t.show_status,expression:"show_status"}],attrs:{md:"6"}},[e("b-form-group",{attrs:{label:t.$t("Status")}},[e("v-select",{attrs:{reduce:function(t){return t.value},placeholder:t.$t("Choose_Task_Status"),options:[{label:"Pending",value:"pending"},{label:"Fulfilled",value:"fulfiled"},{label:"Cancelled",value:"cancelled"}]},model:{value:t.task.status,callback:function(e){t.$set(t.task,"status",e)},expression:"task.status"}})],1)],1),t._v(" "),e("b-col",{directives:[{name:"show",rawName:"v-show",value:t.show_status,expression:"show_status"}],attrs:{md:"6"}},[e("validation-provider",{attrs:{name:"Priority",rules:{required:!0,regex:/^\d*\.?\d*$/}},scopedSlots:t._u([{key:"default",fn:function(s){return[e("b-form-group",{attrs:{label:t.$t("Task_Priority")+" *"}},[e("b-form-input",{attrs:{placeholder:t.$t("Enter_Task_Priority"),state:t.getValidationState(s),"aria-describedby":"Priority-feedback",label:"Priority",type:"number"},model:{value:t.task.priority,callback:function(e){t.$set(t.task,"priority",t._n(e))},expression:"task.priority"}}),t._v(" "),e("b-form-invalid-feedback",{attrs:{id:"Priority-feedback"}},[t._v(t._s(s.errors[0]))])],1)]}}])})],1),t._v(" "),e("b-col",{staticClass:"mt-3",attrs:{md:"12"}},[e("b-button",{attrs:{variant:"primary",type:"submit",disabled:t.SubmitProcessing}},[e("i",{staticClass:"i-Yes me-2 font-weight-bold"}),t._v(" "+t._s(t.$t("submit")))]),t._v(" "),t.SubmitProcessing?t._m(0):t._e()],1)],1)],1)],1)],1)],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"typo__p"},[t("div",{staticClass:"spinner sm spinner-primary mt-3"})])}],!1,null,null,null).exports}}]);